#Retail Store/Convience Store
class Product:
    def __init__(self, product_id, name, category, price, quantity_in_stock):
        self.product_id = product_id
        self.name = name
        self.category = category
        self.price = price
        self.quantity_in_stock = quantity_in_stock

class Inventory:
    def __init__(self):
        self.products = {}

    def add_product(self, product):
        self.products[product.product_id] = product

    def update_stock(self, product_id, quantity):
        if product_id in self.products:
            self.products[product_id].quantity_in_stock += quantity
        else:
            print("Im sorry, we do not have that here")

    def get_product_info(self, product_id):
        if product_id in self.products:
            product = self.products[product_id]
            return f"ID: {product.product_id}, Name: {product.name}, Category: {product.category}, Price: {product.price}, Quantity in Stock: {product.quantity_in_stock}"
        else:
            return "Im sorry, we do not have that here."

class Transaction:
    def __init__(self, transaction_id, products, total_amount):
        self.transaction_id = transaction_id
        self.products = products
        self.total_amount = total_amount

class Store:
    def __init__(self):
        self.inventory = Inventory()
        self.transactions = []
        self.transaction_counter = 1

    def process_transaction(self, products):
        total_amount = sum(product.price * quantity for product, quantity in products.items())
        transaction = Transaction(self.transaction_counter, products, total_amount)
        self.transactions.append(transaction)
        self.transaction_counter += 1
        return transaction

# Sample usage of the classes and CLI
store = Store()

# Adding products to inventory
product1 = Product(1, "Water", "Drinks", 1.99, 50)
product2 = Product(2, "Soda", "Drinks", 3.99, 30)
product3 = Product(3, "Tea", "Drinks", 2.99, 40)
product4 = Product(4, "Chips", "Snacks", 2.99, 20)
product5 = Product(5, "Gummy bears", "Snacks", 3.99, 10)
store.inventory.add_product(product1)
store.inventory.add_product(product2)
store.inventory.add_product(product3)
store.inventory.add_product(product4)
store.inventory.add_product(product5)

# CLI for interacting with the store
while True:
    print("Hello! What can I do for you today:")
    print("1. View Product Info")
    print("2. Process Transaction")
    print("3. Exit")
    choice = input("Enter your choice: ")

    if choice == "1":

        product_id = int(input("Enter product ID: "))
        print(store.inventory.get_product_info(product_id))
    elif choice == "2":
        products = {}
        while True:
            product_id = int(input("Enter product ID (0 to finish): "))
            if product_id == 0:
                break
            quantity = int(input("Enter quantity: "))
            products[store.inventory.products[product_id]] = quantity
        transaction = store.process_transaction(products)
        print(f"Transaction ID: {transaction.transaction_id}")
        print(f"Total Amount: {transaction.total_amount}")
    elif choice == "3":
        break
    else:
        print("Sorry, Im not sure what you are looking for")
